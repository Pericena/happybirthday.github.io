<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Ciberseguridad NIST</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white font-sans">

  <div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6 text-center">Dashboard de Seguridad IA (NIST)</h1>

    <!-- Formulario de activo -->
    <div class="bg-gray-800 p-6 rounded-lg shadow mb-6">
      <h2 class="text-xl font-semibold mb-4">Ingresar Activo</h2>
      <form id="assetForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <input type="text" id="ip" placeholder="IP / Hostname" class="p-2 rounded text-black">
        <input type="text" id="owner" placeholder="Encargado" class="p-2 rounded text-black">
        <select id="type" class="p-2 rounded text-black">
          <option>PC</option>
          <option>Servidor</option>
          <option>Router</option>
          <option>Otro</option>
        </select>
        <input type="text" id="location" placeholder="Ubicación física / red" class="p-2 rounded text-black">
        <input type="text" id="os" placeholder="Sistema Operativo / Versión" class="p-2 rounded text-black">
        <input type="text" id="software" placeholder="Software instalado (separar por coma)" class="p-2 rounded text-black col-span-2">
        <select id="criticality" class="p-2 rounded text-black">
          <option>Alto</option>
          <option>Medio</option>
          <option>Bajo</option>
        </select>
        <input type="date" id="lastScan" class="p-2 rounded text-black">
        <select id="status" class="p-2 rounded text-black">
          <option>Activo</option>
          <option>Inactivo</option>
          <option>En revisión</option>
        </select>
        <textarea id="observations" placeholder="Observaciones adicionales" class="p-2 rounded text-black col-span-2"></textarea>
        <button type="button" onclick="analyzeAsset()" class="bg-blue-600 hover:bg-blue-700 p-2 rounded col-span-2">Analizar Activo</button>
      </form>
    </div>

    <!-- Resultados simulados -->
    <div id="results" class="grid grid-cols-1 md:grid-cols-2 gap-6"></div>

    <!-- Reporte final -->
    <div id="finalReport" class="bg-gray-800 p-6 rounded-lg shadow mt-6 hidden">
      <h2 class="text-xl font-semibold mb-4">Reporte Generado</h2>
      <pre id="reportContent" class="whitespace-pre-wrap"></pre>
    </div>
  </div>

  <script>
    // Datos simulados de escaneo
    const fakeScanData = {
      network: [{port: 22, service: "SSH", status: "abierto"}, {port: 80, service: "HTTP", status: "abierto"}],
      malware: [{file: "test.exe", risk: "Alto"}],
      web: [{url: "http://example.com", vulnerability: "XSS"}],
      dependencies: [{name: "requests", version: "2.28.0", cve: "CVE-2023-12345"}]
    };

    function analyzeAsset() {
      const ip = document.getElementById("ip").value;
      const owner = document.getElementById("owner").value;
      const type = document.getElementById("type").value;
      const location = document.getElementById("location").value;
      const os = document.getElementById("os").value;
      const software = document.getElementById("software").value.split(",");
      const criticality = document.getElementById("criticality").value;
      const lastScan = document.getElementById("lastScan").value;
      const status = document.getElementById("status").value;
      const observations = document.getElementById("observations").value;

      const resultsDiv = document.getElementById("results");
      resultsDiv.innerHTML = "";

      // Tarjeta de Red
      const networkCard = document.createElement("div");
      networkCard.className = "bg-gray-700 p-4 rounded shadow";
      networkCard.innerHTML = `<h3 class="font-semibold mb-2">Escaneo de Red</h3>` + fakeScanData.network.map(n => `<p>Puerto ${n.port}: ${n.service} (${n.status})</p>`).join("");
      resultsDiv.appendChild(networkCard);

      // Tarjeta de Malware
      const malwareCard = document.createElement("div");
      malwareCard.className = "bg-gray-700 p-4 rounded shadow";
      malwareCard.innerHTML = `<h3 class="font-semibold mb-2">Análisis de Malware</h3>` + fakeScanData.malware.map(m => `<p>${m.file}: Riesgo ${m.risk}</p>`).join("");
      resultsDiv.appendChild(malwareCard);

      // Tarjeta de Web
      const webCard = document.createElement("div");
      webCard.className = "bg-gray-700 p-4 rounded shadow";
      webCard.innerHTML = `<h3 class="font-semibold mb-2">Escaneo Web</h3>` + fakeScanData.web.map(w => `<p>${w.url}: Vulnerabilidad ${w.vulnerability}</p>`).join("");
      resultsDiv.appendChild(webCard);

      // Tarjeta de Dependencias y CVEs
      const depsCard = document.createElement("div");
      depsCard.className = "bg-gray-700 p-4 rounded shadow";
      depsCard.innerHTML = `<h3 class="font-semibold mb-2">Dependencias y CVEs</h3>` + fakeScanData.dependencies.map(d => `<p>${d.name} v${d.version}: ${d.cve}</p>`).join("");
      resultsDiv.appendChild(depsCard);

      // Simulación de IA + Gemini
      const reportDiv = document.getElementById("finalReport");
      reportDiv.style.display = "block";
      const reportContent = document.getElementById("reportContent");
      reportContent.textContent = `REPORTE DE SEGURIDAD - NIST SIMULADO
Activo: ${ip}
Encargado: ${owner}
Tipo: ${type}
Ubicación: ${location}
Sistema Operativo: ${os}
Criticidad: ${criticality}
Último Escaneo: ${lastScan}
Estado: ${status}
Observaciones: ${observations}

Resumen de Escaneos:
- Red: ${fakeScanData.network.length} elementos
- Malware: ${fakeScanData.malware.length} elementos
- Web: ${fakeScanData.web.length} vulnerabilidades
- Dependencias: ${fakeScanData.dependencies.length} CVEs

Recomendaciones Generadas (simuladas):
- Actualizar librerías con CVEs críticas
- Revisar puertos expuestos según criticidad
- Analizar archivos sospechosos y aislarlos
- Aplicar parches de seguridad según CVEs detectadas
- Revisar vulnerabilidades web reportadas`;
    }
  </script>

</body>
</html>
